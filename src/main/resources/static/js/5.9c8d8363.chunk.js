(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{823:function(e,t,a){},827:function(e,t,a){"use strict";a.r(t);a(610);var n=a(606),o=(a(483),a(481)),l=(a(506),a(503)),s=(a(552),a(589)),i=(a(553),a(586)),c=(a(551),a(505)),r=a(508),p=a(509),u=a(546),h=a(510),d=a(547),m=(a(554),a(608)),g=(a(555),a(580)),f=(a(556),a(607)),w=a(6),S=a.n(w),b=(a(823),a(121)),E=a(60),F=a(16),y=a(59),v=f.a.Item,C=g.a.Content,x=m.a.info,k=m.a.error,P=m.a.success,I={md:24,lg:12,xl:8},L=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).getFileList=function(){a.props.actions.getFileList()},a.loadPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;a.setState({pageNo:e},function(){a.props.form.validateFields(function(n,o){if(!n){var l={};l.pageNo=e,l.pageSize=t,l.tableName=o.fileId,a.props.actions.getTableCollumPage(l),a.setState({selectedRowKeys:[],selectedRows:[]})}})})},a.handlePageChange=function(e,t){a.loadPage(e,t)},a.handleShowSizeChange=function(e,t){a.loadPage(1,t)},a.handleSearch=function(e){e&&e.preventDefault(),a.loadPage()},a.batchUpdate=function(){var e=a.state.selectedRowKeys,t=a.props.form.getFieldValue,n=[],o=t("fileId");o&&""!==o?(e.forEach(function(e){var a=t("checkbox-group_".concat(e)),o=[];a.includes("can_search")?o.push(1):o.push(0),a.includes("can_edit")?o.push(1):o.push(0),a.includes("can_view")?o.push(1):o.push(0),n.push({id:e,value:o})}),a.props.actions.tableCollumManager({list:n,tableName:t("fileId")})):m.a.error({title:"Tips",content:"Please select the file!"})},a.showSuccess=function(e){P({title:"Success",content:e,okText:"Confirm",okType:"info",onOk:function(){a.loadPage()}})},a.showError=function(e){k({title:"Faild",content:e,okText:"Confirm",okType:"info"})},a.showInfo=function(e){x({title:"Tips",content:e,okText:"Confirm",okType:"info"})},a.changeSelectGroup=function(e){e&&""!==e&&a.loadPage()},a.resetForm=function(){a.setState({selectedRowKeys:[],selectedRows:[]}),a.props.actions.clearData(),a.props.form.resetFields()},a.state={selectedRowKeys:[],selectedRows:[],columnsObj:[{title:"\u5217\u540d(Column names)",key:"excel_collum_name",dataIndex:"excel_collum_name"},{title:"\u591a\u9009\u64cd\u4f5c(Multi Operation)",key:"isEdit",render:function(e,t){return S.a.createElement(f.a.Item,{label:""},a.props.form.getFieldDecorator("checkbox-group_".concat(t.id),{initialValue:t.initialChecked||[]})(S.a.createElement(c.a.Group,{style:{width:"100%"}},S.a.createElement(s.a,null,S.a.createElement(i.a,{span:8},S.a.createElement(c.a,{value:"can_edit"},"\u662f\u5426\u53ef\u7f16\u8f91(canEdit)")),S.a.createElement(i.a,{span:8},S.a.createElement(c.a,{value:"can_view"},"\u662f\u5426\u53ef\u5c55\u793a(isShow)")),S.a.createElement(i.a,{span:8},S.a.createElement(c.a,{value:"can_search"},"\u662f\u5426\u53ef\u641c\u7d22(isSearch)"))))))}}]},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getFileList(),this.resetForm()}},{key:"componentWillReceiveProps",value:function(e){this.props.operateSuccessFlag!==e.operateSuccessFlag&&!0===e.operateSuccessFlag&&(this.showSuccess(e.operateInfo),this.props.actions.resetState()),this.props.operateFailFlag!==e.operateFailFlag&&!0===e.operateFailFlag&&(this.showError(e.operateInfo),this.props.actions.resetState())}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,c=a.columnListPage,r=a.fileList,p=this.state,u=p.selectedRowKeys,h=p.columnsObj,d=this.props.pageInfo,m={current:d.pageNum,total:d.total,pageSize:d.pageSize,showSizeChanger:!0,showQuickJumper:!0,onChange:this.handlePageChange,onShowSizeChange:this.handleShowSizeChange},g={selectedRowKeys:u,onChange:function(t,a){e.setState({selectedRowKeys:t,selectedRows:a})},getCheckboxProps:function(e){return{disabled:!1,name:e.name}}};return S.a.createElement("div",{className:"page-index"},S.a.createElement(C,null,S.a.createElement(f.a,{className:"ant-advanced-search-form",onSubmit:this.handleSearch},S.a.createElement(s.a,{gutter:24},S.a.createElement(i.a,{span:10,style:{height:70}},S.a.createElement(v,{labelCol:{span:6},wrapperCol:{span:18},label:"\u6587\u4ef6(File)"},t("fileId",{rules:[{required:!0,whitespace:!0,message:"Please select the file!"}]})(S.a.createElement(l.a,{showSearch:!0,optionFilterProp:"children",allowClear:!0,style:{width:400},placeholder:"\u8bf7\u9009\u62e9",onSelect:this.changeSelectGroup},r&&r.length>0&&r.map(function(e){return S.a.createElement(l.a.Option,{title:e.excelName,key:"tableFile_".concat(e.id),value:e.tableName},e.excelName)})))))),S.a.createElement(s.a,{gutter:24},S.a.createElement(i.a,Object.assign({},I,{style:{marginLeft:"100px",marginBottom:"15px"}}),S.a.createElement(o.a,{type:"default",onClick:this.resetForm},"\u91cd\u7f6e(Reset)")))),S.a.createElement("h3",{style:{margin:"0 0 5px",paddingTop:"25px",borderTop:"1px solid #ddd"}}),S.a.createElement(s.a,{gutter:24,style:{marginBottom:"10px"}},S.a.createElement(i.a,{style:{textAlign:"left"},span:12},S.a.createElement(o.a,{type:"primary",onClick:this.batchUpdate,disabled:!u.length>0},"\u6279\u91cf\u66f4\u65b0(Batch Update)"),"\xa0\xa0\xa0\xa0",S.a.createElement(y.a,{to:"/admin"},"\u8df3\u8f6c\u4fe1\u606f\u7f16\u8f91(Jump Edit Info)")),S.a.createElement(i.a,{style:{textAlign:"right"},span:12},S.a.createElement("div",{className:"search-count"},"\u5171 ",m.total," \u6761"))),S.a.createElement(n.a,{scroll:{x:"max-content"},rowKey:"id",className:"table-list",rowSelection:g,dataSource:c,columns:h,pagination:m})))}}]),t}(w.PureComponent),R=f.a.create()(L);t.default=Object(b.connect)(function(e){var t=e.resumeReducer;return{resultList:t.resultList,operateSuccessFlag:t.operateSuccessFlag,operateFailFlag:t.operateFailFlag,operateInfo:t.operateInfo,tableList:t.tableList,fileList:t.fileList,refreshFileFlag:t.refreshFileFlag,columnListPage:t.columnListPage,pageInfo:t.pageInfo,loading:t.loading}},function(e){return{actions:Object(E.bindActionCreators)(F.a,e)}})(R)}}]);
//# sourceMappingURL=5.9c8d8363.chunk.js.map