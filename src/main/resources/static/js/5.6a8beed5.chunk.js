(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{823:function(e,t,a){},827:function(e,t,a){"use strict";a.r(t);a(610);var n=a(606),o=(a(483),a(481)),l=(a(506),a(503)),c=(a(552),a(589)),s=(a(553),a(586)),i=(a(551),a(505)),r=a(508),p=a(509),u=a(546),h=a(510),d=a(547),g=(a(554),a(608)),m=(a(555),a(580)),f=(a(556),a(607)),w=a(6),b=a.n(w),S=(a(823),a(121)),F=a(59),E=a(16),v=(a(34),f.a.Item),y=m.a.Content,k=g.a.info,x=g.a.error,C=g.a.success,P=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).getFileList=function(){a.props.actions.getFileList()},a.loadPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;a.setState({pageNo:e},function(){a.props.form.validateFields(function(n,o){if(!n){var l={};l.pageNo=e,l.pageSize=t,l.tableName=o.fileId,a.props.actions.getTableCollumPage(l),a.setState({selectedRowKeys:[],selectedRows:[]})}})})},a.handlePageChange=function(e,t){a.loadPage(e,t)},a.handleShowSizeChange=function(e,t){a.loadPage(1,t)},a.handleSearch=function(e){e&&e.preventDefault(),a.loadPage()},a.batchUpdate=function(){var e=a.state.selectedRowKeys,t=a.props.form.getFieldValue,n=[],o=t("fileId");o&&""!==o?(e.forEach(function(e){var a=t("checkbox-group_".concat(e)),o=[];a.includes("can_search")?o.push(1):o.push(0),a.includes("can_edit")?o.push(1):o.push(0),a.includes("can_view")?o.push(1):o.push(0),n.push({id:e,value:o})}),a.props.actions.tableCollumManager({list:n,tableName:t("fileId")})):g.a.error({title:"\u9519\u8bef\u63d0\u793a",content:"\u8bf7\u5148\u9009\u62e9\u6587\u4ef6"})},a.showSuccess=function(e){C({title:"\u64cd\u4f5c\u6210\u529f",content:e,okText:"\u786e\u5b9a",okType:"info",onOk:function(){a.loadPage()}})},a.showError=function(e){x({title:"\u64cd\u4f5c\u5931\u8d25",content:e,okText:"\u786e\u5b9a",okType:"info"})},a.showInfo=function(e){k({title:"\u64cd\u4f5c\u63d0\u793a",content:e,okText:"\u786e\u5b9a",okType:"info"})},a.changeSelectGroup=function(e){e&&""!==e&&a.loadPage()},a.resetForm=function(){a.props.form.resetFields()},a.state={selectedRowKeys:[],selectedRows:[],columnsObj:[{title:"\u5217\u540d",key:"excel_collum_name",dataIndex:"excel_collum_name"},{title:"\u591a\u9009\u64cd\u4f5c",key:"isEdit",render:function(e,t){return b.a.createElement(f.a.Item,{label:""},a.props.form.getFieldDecorator("checkbox-group_".concat(t.id),{initialValue:t.initialChecked||[]})(b.a.createElement(i.a.Group,{style:{width:"100%"}},b.a.createElement(c.a,null,b.a.createElement(s.a,{span:8},b.a.createElement(i.a,{value:"can_edit"},"\u662f\u5426\u53ef\u7f16\u8f91")),b.a.createElement(s.a,{span:8},b.a.createElement(i.a,{value:"can_view"},"\u662f\u5426\u53ef\u5c55\u793a")),b.a.createElement(s.a,{span:8},b.a.createElement(i.a,{value:"can_search"},"\u662f\u5426\u53ef\u641c\u7d22"))))))}}]},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getFileList()}},{key:"componentWillReceiveProps",value:function(e){this.props.operateSuccessFlag!==e.operateSuccessFlag&&!0===e.operateSuccessFlag&&(this.showSuccess(e.operateInfo),this.props.actions.resetState()),this.props.operateFailFlag!==e.operateFailFlag&&!0===e.operateFailFlag&&(this.showError(e.operateInfo),this.props.actions.resetState())}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,i=a.columnListPage,r=a.fileList,p=this.state,u=p.selectedRowKeys,h=p.columnsObj,d=this.props.pageInfo,g={current:d.pageNum,total:d.total,pageSize:d.pageSize,showSizeChanger:!0,showQuickJumper:!0,onChange:this.handlePageChange,onShowSizeChange:this.handleShowSizeChange},m={selectedRowKeys:u,onChange:function(t,a){e.setState({selectedRowKeys:t,selectedRows:a})},getCheckboxProps:function(e){return{disabled:!1,name:e.name}}};return b.a.createElement("div",{className:"page-index"},b.a.createElement(y,null,b.a.createElement(f.a,{className:"ant-advanced-search-form",onSubmit:this.handleSearch},b.a.createElement(c.a,{gutter:24},b.a.createElement(s.a,{span:10,style:{height:70}},b.a.createElement(v,{labelCol:{span:6},wrapperCol:{span:18},label:"\u6587\u4ef6"},t("fileId",{rules:[{required:!0,whitespace:!0,message:"\u8bf7\u5148\u9009\u62e9\u6587\u4ef6"}]})(b.a.createElement(l.a,{showSearch:!0,optionFilterProp:"children",allowClear:!0,style:{width:400},placeholder:"\u8bf7\u9009\u62e9",onSelect:this.changeSelectGroup},r&&r.length>0&&r.map(function(e){return b.a.createElement(l.a.Option,{title:e.excelName,key:"tableFile_".concat(e.id),value:e.tableName},e.excelName)}))))))),b.a.createElement("h3",{style:{margin:"0 0 5px",paddingTop:"25px",borderTop:"1px solid #ddd"}}),b.a.createElement(c.a,{gutter:24,style:{marginBottom:"10px"}},b.a.createElement(s.a,{style:{textAlign:"left"},span:12},b.a.createElement(o.a,{type:"primary",onClick:this.batchUpdate,disabled:!u.length>0},"\u6279\u91cf\u66f4\u65b0")),b.a.createElement(s.a,{style:{textAlign:"right"},span:12},b.a.createElement("div",{className:"search-count"},"\u5171 ",g.total," \u6761"))),b.a.createElement(n.a,{scroll:{x:"max-content"},rowKey:"id",className:"table-list",rowSelection:m,dataSource:i,columns:h,pagination:g})))}}]),t}(w.PureComponent),I=f.a.create()(P);t.default=Object(S.connect)(function(e){var t=e.resumeReducer;return{resultList:t.resultList,operateSuccessFlag:t.operateSuccessFlag,operateFailFlag:t.operateFailFlag,operateInfo:t.operateInfo,tableList:t.tableList,fileList:t.fileList,refreshFileFlag:t.refreshFileFlag,columnListPage:t.columnListPage,pageInfo:t.pageInfo,loading:t.loading}},function(e){return{actions:Object(F.bindActionCreators)(E.a,e)}})(I)}}]);
//# sourceMappingURL=5.6a8beed5.chunk.js.map